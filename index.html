<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>SBAR Automatizado - Passagem de Cuidados</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      max-width: 900px;
      margin: auto;
      background-color: #f4f4f4;
    }
    h1, h2 {
      color: #2c3e50;
    }
    label {
      font-weight: bold;
      display: block;
      margin-top: 15px;
    }
    input, select, textarea {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      margin-bottom: 10px;
      border: 1px solid #ccc;
      border-radius: 5px;
    }
    button {
      padding: 10px 20px;
      background-color: #2980b9;
      color: white;
      border: none;
      border-radius: 5px;
      font-size: 16px;
      margin-right: 10px;
      cursor: pointer;
    }
    #resultado {
      white-space: pre-wrap;
      background-color: #fff;
      padding: 15px;
      border-radius: 5px;
      margin-top: 20px;
      border: 1px solid #ccc;
    }
  </style>
</head>
<body>
  <h1>SBAR Automatizado - Passagem de Cuidados Cir√∫rgicos</h1>

  <h2>Subjetivo (Situa√ß√£o)</h2>
  <label>Nome do paciente:</label>
  <input type="text" id="nome">

  <label>Idade:</label>
  <input type="number" id="idade">

  <label>Sexo:</label>
  <select id="sexo">
    <option>Masculino</option>
    <option>Feminino</option>
  </select>

  <label>Procedimento cir√∫rgico:</label>
  <input type="text" id="procedimento">

  <label>Tipo de anestesia:</label>
  <select id="anestesia">
    <option>Geral</option>
    <option>Balanceada</option>
    <option>Venosa Total (TIVA)</option>
    <option>Raquidiana</option>
    <option>Peridural</option>
    <option>Bloqueio regional</option>
  </select>

  <label>Hor√°rio de t√©rmino da cirurgia:</label>
  <input type="time" id="hora">

  <label>Sinais vitais:</label>
  <input type="text" id="sinais" placeholder="Ex: PA 120/80, FC 85, FR 16, SpO‚ÇÇ 98%">

  <h2>Background (Hist√≥rico)</h2>
  <label>Comorbidades relevantes:</label>
  <textarea id="comorbidades" placeholder="Ex: HAS, DM2, DPOC..."></textarea>

  <label>Resumo da anestesia/cirurgia:</label>
  <textarea id="resumo" placeholder="Eventos intraoperat√≥rios, estabilidade, medica√ß√µes usadas..."></textarea>

  <h2>Avalia√ß√£o</h2>
  <label>Estado neurol√≥gico (Glasgow / RASS):</label>
  <input type="text" id="neurologico">

  <label>Respira√ß√£o:</label>
  <input type="text" id="respiracao" placeholder="Ex: Entubado em VM, FiO‚ÇÇ 40%">

  <label>Hemodin√¢mica:</label>
  <input type="text" id="hemodinamica" placeholder="Ex: Noradrenalina 0,05 mcg/kg/min">

  <label>Diurese e hidrata√ß√£o:</label>
  <input type="text" id="diurese" placeholder="Ex: Diurese preservada, balan√ßo h√≠drico +500ml">

  <h2>Recomenda√ß√£o</h2>
  <textarea id="recomendacao" placeholder="Condutas esperadas na UTI, exames pendentes, plano de extuba√ß√£o, etc."></textarea>

  <br><br>
  <button onclick="gerarSBAR()">Gerar Relat√≥rio</button>
  <button onclick="copiarTexto()">Copiar Relat√≥rio</button>
  <button onclick="gerarPDF()">Gerar PDF</button>

  <h2>üìù Relat√≥rio Gerado</h2>
  <div id="resultado"></div>

  <!-- Bibliotecas para gerar PDF -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

  <script>
    let textoGerado = "";

    function gerarSBAR() {
      const nome = document.getElementById("nome").value;
      const idade = document.getElementById("idade").value;
      const sexo = document.getElementById("sexo").value;
      const procedimento = document.getElementById("procedimento").value;
      const anestesia = document.getElementById("anestesia").value;
      const hora = document.getElementById("hora").value;
      const sinais = document.getElementById("sinais").value;
      const comorbidades = document.getElementById("comorbidades").value;
      const resumo = document.getElementById("resumo").value;
      const neurologico = document.getElementById("neurologico").value;
      const respiracao = document.getElementById("respiracao").value;
      const hemodinamica = document.getElementById("hemodinamica").value;
      const diurese = document.getElementById("diurese").value;
      const recomendacao = document.getElementById("recomendacao").value;

      textoGerado = `ü©∫ SBAR ‚Äì Passagem de Cuidados Cir√∫rgicos para UTI

üîπ SITUA√á√ÉO
Paciente ${nome}, ${idade} anos, ${sexo}, submetido a ${procedimento} sob anestesia ${anestesia}. Cirurgia finalizada √†s ${hora}. Sinais vitais atuais: ${sinais}.

üîπ BACKGROUND
Comorbidades: ${comorbidades}.
Resumo da cirurgia/anestesia: ${resumo}.

üîπ AVALIA√á√ÉO
Estado neurol√≥gico: ${neurologico}.
Respira√ß√£o: ${respiracao}.
Hemodin√¢mica: ${hemodinamica}.
Hidrata√ß√£o e diurese: ${diurese}.

üîπ RECOMENDA√á√ïES
${recomendacao}

---

‚úÖ Relat√≥rio gerado automaticamente para registro cl√≠nico.`;

      document.getElementById("resultado").textContent = textoGerado;
    }

    function copiarTexto() {
      if (!textoGerado) return alert("Gere o relat√≥rio primeiro.");
      navigator.clipboard.writeText(textoGerado)
        .then(() => alert("Relat√≥rio copiado para a √°rea de transfer√™ncia!"))
        .catch(() => alert("Erro ao copiar. Tente manualmente."));
    }

    async function gerarPDF() {
      if (!textoGerado) return alert("Gere o relat√≥rio primeiro.");

      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();
      const linhas = textoGerado.split('\n');
      let y = 10;

      doc.setFont("helvetica", "normal");
      doc.setFontSize(12);

      linhas.forEach(linha => {
        if (y > 280) {
          doc.addPage();
          y = 10;
        }
        doc.text(linha, 10, y);
        y += 8;
      });

      doc.save("relatorio-sbar.pdf");
    }
  </script>
</body>
</html>
