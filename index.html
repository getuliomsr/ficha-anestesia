<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SBAR Automatizado - UTI</title>
<style>
 body {
   font-family: Arial, sans-serif;
   background: #f7f7f7;
   padding: 20px;
   max-width: 900px;
   margin: auto;
 }
 label {font-weight: bold; display:block; margin-top:10px;}
 input, select {width: 100%; padding:8px; border-radius:5px; border:1px solid #ccc; margin-bottom:10px;}
 #utiCampos, #viaAereaDetalhada {display:none; margin-left:15px; border-left:3px solid #2980b9; padding-left:10px;}
 #resultado {background:#fff;border:1px solid #ccc; padding:15px; white-space:pre-wrap; border-radius:5px; margin-top:20px;}
</style>
</head>
<body>

<h1>SBAR Automatizado - Passagem para UTI</h1>

<label>Nome do paciente:</label>
<input type="text" id="nome">

<label>Idade:</label>
<input type="number" id="idade">

<label>Sexo:</label>
<select id="sexo">
 <option value="">Selecione</option>
 <option value="masculino">Masculino</option>
 <option value="feminino">Feminino</option>
</select>

<label>Motivo da interna√ß√£o:</label>
<input type="text" id="motivo">

<label>Origem do paciente:</label>
<select id="origem" onchange="toggleUTICampos()">
 <option value="">Selecione</option>
 <option value="emerg√™ncia">Emerg√™ncia</option>
 <option value="enfermaria">Enfermaria</option>
 <option value="uti">UTI</option>
</select>

<div id="utiCampos">
 <label>Est√° intubado?</label>
 <select id="intubado" onchange="toggleViaAereaDetalhada()">
   <option value="">Selecione</option>
   <option value="Sim">Sim</option>
   <option value="N√£o">N√£o</option>
 </select>

 <label>Tipo de ventila√ß√£o:</label>
 <select id="tipoVentilacao">
   <option value="">Selecione</option>
   <option>VM</option>
   <option>Ar ambiente</option>
   <option>O2 suplementar</option>
   <option>Traqueostomia</option>
 </select>

 <label>Drogas vasoativas:</label>
 <select id="drogas" multiple>
   <option value="noradrenalina">Noradrenalina</option>
   <option value="vasopressina">Vasopressina</option>
   <option value="dobutamina">Dobutamina</option>
   <option value="nitroprussiato">Nitroprussiato</option>
   <option value="nitroglicerina">Nitroglicerina</option>
   <option value="outros">Outros</option>
 </select>

 <label>Outras drogas:</label>
 <input type="text" id="outrasDrogas">

 <label>Seda√ß√£o:</label>
 <select id="sedacaoUTI">
   <option value="">Selecione</option>
   <option>Plano profundo</option>
   <option>Consciente</option>
 </select>

 <label>Monitorizado?</label>
 <select id="monitorizado">
   <option value="">Selecione</option>
   <option>Sim</option>
   <option>N√£o</option>
 </select>

 <div id="viaAereaDetalhada">
   <h4>Detalhes da via a√©rea</h4>
   <label>Sequ√™ncia:</label>
   <select id="sequencia">
     <option>R√°pida</option><option>Lenta</option><option>Atrasada</option>
   </select>
   <label>N√∫mero do tubo:</label><input id="numTubo">
   <label>Aramado?</label><select id="aramado"><option>Sim</option><option>N√£o</option></select>
   <label>Dispositivo:</label>
   <select id="dispositivo"> 
     <option>Laringosc√≥pio</option>
     <option>Videolaringosc√≥pio</option>
     <option>Fibrosc√≥pio</option>
   </select>
   <label>Cormack:</label><input id="cormack">
   <label>Bougie?</label><select id="bougie"><option>Sim</option><option>N√£o</option></select>
   <label>Intercorr√™ncias:</label><input id="intercorrenciasViaAerea" placeholder="Ex: nenhuma">
 </div>
</div>

<label>Procedimento realizado:</label>
<input id="procedimento">

<label>Urg√™ncia do procedimento:</label>
<select id="urgencia">
 <option>Emerg√™ncia</option>
 <option>Urg√™ncia</option>
 <option>Eletivo</option>
</select>

<h3>üî∑ Background</h3>

<label>Peso (kg):</label><input id="peso" type="number">
<label>Altura (cm):</label><input id="altura" type="number">
<label>Alergias:</label><input id="alergias">

<button onclick="gerar()">Gerar Relat√≥rio</button>

<h3>üìù Relat√≥rio</h3>
<div id="resultado"></div>

<script>
function toggleUTICampos(){
 const o=document.getElementById("origem").value;
 document.getElementById("utiCampos").style.display=o==="uti"?"block":"none";
 if(o!=="uti") document.getElementById("viaAereaDetalhada").style.display="none";
}
function toggleViaAereaDetalhada(){
 const i=document.getElementById("intubado").value;
 document.getElementById("viaAereaDetalhada").style.display=i==="N√£o"?"block":"none";
}
function calcPI(altura,sexo){
 if(!altura||!sexo) return 0;
 return sexo==="masculino"?52+0.75*(altura-152):49+0.67*(altura-152);
}
function gerar(){
 const n=document.getElementById("nome").value;
 const i=document.getElementById("idade").value;
 const s=document.getElementById("sexo").value;
 const m=document.getElementById("motivo").value;
 const o=document.getElementById("origem").value;
 const p=document.getElementById("procedimento").value;
 const u=document.getElementById("urgencia").value;
 const peso=parseFloat(document.getElementById("peso").value);
 const altura=parseFloat(document.getElementById("altura").value);
 const pi=calcPI(altura,s);
 const pa=peso+0.4*(peso-pi);
 const alerg=document.getElementById("alergias").value;
 let situacaoText=`Paciente ${n}, ${i} anos, ${s}. ${m ? `Apresenta quadro de ${m.toLowerCase()}.` : ""}\n`;
 // Origem narrativa
 if(o==="uti"){
   const int=document.getElementById("intubado").value;
   const vent=document.getElementById("tipoVentilacao").value;
   const drogas=Array.from(document.getElementById("drogas").selectedOptions).map(x=>x.value);
   const outras=document.getElementById("outrasDrogas").value;
   const sed=document.getElementById("sedacaoUTI").value;
   const mon=document.getElementById("monitorizado").value;

   let textoUTI="Vem da UTI";
   if(int==="Sim") textoUTI+=` em IOT + ${vent}`;
   else textoUTI+=` n√£o intubado, com ${vent}`;
   if(sed) textoUTI+=`, sedado em ${sed}`;
   if(mon==="Sim") textoUTI+=`, monitorizado`;

   const drogasComb=drogas.length?` em uso de ${drogas.join(", ")}${outras?`, ${outras}`:""}.`:"."; 
   textoUTI+=drogasComb;
   situacaoText+=textoUTI+"\n";
   if(int==="N√£o"){
     // Via a√©rea detalhada
     const seq=document.getElementById("sequencia").value;
     const tubo=document.getElementById("numTubo").value;
     const aram=document.getElementById("aramado").value;
     const disp=document.getElementById("dispositivo").value;
     const cor=document.getElementById("cormack").value;
     const bou=document.getElementById("bougie").value;
     const inter=document.getElementById("intercorrenciasViaAerea").value;
     situacaoText+=`Paciente submetido √† sequ√™ncia ${seq.toLowerCase()}, intubado com tubo ${aram.toLowerCase()} n¬∫ ${tubo}, utilizando ${disp.toLowerCase()}, Cormack ${cor}, ${bou==="Sim"?"com":"sem"} bougie, ${inter ? inter : "sem intercorr√™ncias"}.\n`;
   } else {
     situacaoText+=`Paciente j√° intubado previamente.\n`;
   }
 } else if(o==="emerg√™ncia"||o==="enfermaria"){
   situacaoText+=`Procedente da ${o}, encaminhado ao centro cir√∫rgico.\n`;
 }
 
 const background=`Comorbidades e antecedentes informados. Alergias: ${alerg}. Peso ${peso} kg (ideal ${pi.toFixed(1)} kg, ajustado ${pa.toFixed(1)} kg).\n`;
 const avaliacao=`Ser√° submetido a ${p.toLowerCase()} em car√°ter ${u.toLowerCase()}.\n`;
 const textoFinal=`# S
${situacaoText}

# B
${background}

# A
${avaliacao}`;
 document.getElementById("resultado").textContent=textoFinal;
}
</script>
</body>
</html>
