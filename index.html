<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>SBAR Automatizado - UTI</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f7f7f7;
      padding: 20px;
      max-width: 900px;
      margin: auto;
    }
    h1, h2 {
      color: #2c3e50;
    }
    label {
      font-weight: bold;
      margin-top: 10px;
      display: block;
    }
    input, select, textarea {
      width: 100%;
      padding: 8px;
      margin-bottom: 12px;
      border: 1px solid #ccc;
      border-radius: 5px;
    }
    textarea {
      resize: vertical;
    }
    button {
      background-color: #2980b9;
      color: white;
      padding: 10px 20px;
      margin: 10px 10px 0 0;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    #resultado {
      white-space: pre-wrap;
      background-color: #fff;
      padding: 15px;
      border: 1px solid #ccc;
      border-radius: 5px;
      margin-top: 20px;
    }
  </style>
</head>
<body>

<h1>SBAR Automatizado - Passagem para UTI</h1>

<h2>üü¢ Situa√ß√£o</h2>

<label>Nome do paciente:</label>
<input type="text" id="nome" placeholder="Ex: Pedro" />

<label>Idade:</label>
<input type="number" id="idade" placeholder="Ex: 42" />

<label>Motivo da interna√ß√£o:</label>
<input type="text" id="motivo" placeholder="Ex: Abdome agudo, trauma tor√°cico, TCE,..." />

<label>Procedimento realizado:</label>
<input type="text" id="procedimento" placeholder="Laparotomia exploradora, Apendicectomia,..." />

<label>Urg√™ncia do procedimento:</label>
<select id="urgencia">
  <option>Emerg√™ncia</option>
  <option>Urg√™ncia</option>
  <option>Eletivo</option>
</select>

  <!-- üî∑ Background -->
<h2>üî∑ Background</h2>

<label>Comorbidades (marque as que se aplicam):</label>
<select id="comorbidades" multiple>
  <option value="hipertenso">Hipertens√£o</option>
  <option value="diabetes n√£o insulinodependente">Diabetes n√£o insulinodependente</option>
  <option value="diabetes insulinodependente">Diabetes insulinodependente</option>
  <option value="doen√ßa arterial coronariana">Doen√ßa Arterial Coronariana</option>
  <option value="DPOC">DPOC</option>
  <option value="IRC">Doen√ßa Renal Cr√¥nica</option>
  <option value="outros">Outros</option>
</select>

<label>Cirurgias pr√©vias:</label>
<input type="text" id="cirurgias" placeholder="Ex: Revasculariza√ß√£o do mioc√°rdio" />

<label>Medica√ß√µes em uso:</label>
<input type="text" id="medicacoes" placeholder="Ex: Losartana, Metformina, AAS..." />


<!-- üü† Avalia√ß√£o -->
<h2>üü† Avalia√ß√£o</h2>

<label>Tipo de anestesia:</label>
<select id="anestesia">
  <option>Geral balanceada</option>
  <option>Geral venosa total (TIVA)</option>
  <option>Raquianestesia</option>
  <option>Peridural</option>
  <option>Outros</option>
</select>

<label>Indu√ß√£o anest√©sica:</label>
<input type="text" id="indu√ßao" placeholder="Ex: Sequ√™ncia r√°pida, sem intercorr√™ncias" />

<label>Via a√©rea:</label>
<select id="viaAerea">
  <option>Cormack-Lehane I</option>
  <option>Cormack-Lehane II</option>
  <option>Cormack-Lehane III-IV</option>
</select>

<label>Hemodin√¢mica:</label>
<input type="text" id="hemodinamica" placeholder="Ex: Noradrenalina 0,2 mcg/kg/min" />

<label>Respira√ß√£o:</label>
<input type="text" id="respiracao" placeholder="Ex: Ventila√ß√£o mec√¢nica durante transoperat√≥rio" />

<label>Renal:</label>
<input type="text" id="renal" placeholder="Ex: 2500ml de cristaloide, 500ml de diurese" />

<label>Infeccioso:</label>
<input type="text" id="infeccao" placeholder="Ex: Febre intraoperat√≥ria, Ceftriaxona 13:00" />

<label>Hematol√≥gico:</label>
<input type="text" id="hemato" placeholder="Ex: 1 concentrado de hem√°cias" />

<label>End√≥crino:</label>
<input type="text" id="endocrino" placeholder="Ex: Euglic√™mico" />

<label>Dispositivos (marque os presentes):</label>
<select id="dispositivos" multiple>
  <option value="CVC">CVC</option>
  <option value="Acesso perif√©rico">Acesso perif√©rico</option>
  <option value="Dreno cir√∫rgico">Dreno cir√∫rgico</option>
  <option value="TOT">Tubo orotraqueal</option>
  <option value="SVD">SVD</option>
  <option value="AVP">AVP</option>
</select>


<!-- üî¥ Recomenda√ß√£o -->
<h2>üî¥ Recomenda√ß√£o</h2>

<label>Transporte:</label>
<select id="transporte">
  <option>Monitoriza√ß√£o cont√≠nua</option>
  <option>Monitoriza√ß√£o e uso de drogas vasoativas</option>
</select>

<label>Seda√ß√£o:</label>
<select id="sedacao">
  <option>Sedado</option>
  <option>Despertando</option>
  <option>Acordado</option>
</select>

<label>Ventila√ß√£o:</label>
<select id="ventilacao">
  <option>Em ventila√ß√£o mec√¢nica</option>
  <option>Espontaneamente</option>
</select>

<label>Intercorr√™ncias durante transporte:</label>
<input type="text" id="intercorrencias" placeholder="Ex: Nenhuma" />


<!-- ‚úÖ Bot√µes -->
<br>
<button onclick="gerarSBAR()">Gerar Relat√≥rio</button>
<button onclick="copiarTexto()">Copiar Relat√≥rio</button>
<button onclick="gerarPDF()">Gerar PDF</button>

<!-- üìú Resultado -->
<h2>üìù Relat√≥rio Gerado</h2>
<div id="resultado"></div>

<!-- üìú Scripts -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
  let textoGerado = "";

  function gerarSBAR() {
    const nome = document.getElementById("nome").value;
    const idade = document.getElementById("idade").value;
    const motivo = document.getElementById("motivo").value;
    const procedimento = document.getElementById("procedimento").value;
    const urgencia = document.getElementById("urgencia").value;

    const comorbidades = Array.from(document.getElementById("comorbidades").selectedOptions).map(o => o.value).join(", ");
    const cirurgias = document.getElementById("cirurgias").value;
    const medicacoes = document.getElementById("medicacoes").value;

    const anestesia = document.getElementById("anestesia").value;
    const indu√ßao = document.getElementById("indu√ßao").value;
    const viaAerea = document.getElementById("viaAerea").value;
    const hemodinamica = document.getElementById("hemodinamica").value;
    const respiracao = document.getElementById("respiracao").value;
    const renal = document.getElementById("renal").value;
    const infeccao = document.getElementById("infeccao").value;
    const hemato = document.getElementById("hemato").value;
    const endocrino = document.getElementById("endocrino").value;
    const dispositivos = Array.from(document.getElementById("dispositivos").selectedOptions).map(o => o.value).join(", ");

    const transporte = document.getElementById("transporte").value;
    const sedacao = document.getElementById("sedacao").value;
    const ventilacao = document.getElementById("ventilacao").value;
    const intercorrencias = document.getElementById("intercorrencias").value;

    textoGerado = `# ${nome}, ${idade} anos
# Motivo da interna√ß√£o: ${motivo}

# S
Paciente vem com hist√≥ria de ${motivo.toLowerCase()}.
Vem ao Centro Cir√∫rgico para realiza√ß√£o de ${procedimento.toLowerCase()} em regime de ${urgencia.toLowerCase()}.

# B
Comorbidades: ${comorbidades}.
Cirurgias pr√©vias: ${cirurgias}.
Em uso de ${medicacoes}.

# A
Realizado anestesia ${anestesia.toLowerCase()}.
Indu√ß√£o anest√©sica: ${indu√ßao}.
Via a√©rea: ${viaAerea}.
Hemodin√¢mica: ${hemodinamica}.
Pulmonar: ${respiracao}.
Renal: ${renal}.
Infeccioso: ${infeccao}.
Hemato: ${hemato}.
End√≥crino: ${endocrino}.
Dispositivos: ${dispositivos}.

# R
Transporte: ${transporte}, ${sedacao}, ${ventilacao}, ${intercorrencias}.
`;

    document.getElementById("resultado").textContent = textoGerado;
  }

  function copiarTexto() {
    if (!textoGerado) return alert("Gere o relat√≥rio primeiro.");
    navigator.clipboard.writeText(textoGerado)
      .then(() => alert("Relat√≥rio copiado para a √°rea de transfer√™ncia!"))
      .catch(() => alert("Erro ao copiar. Copie manualmente."));
  }

  async function gerarPDF() {
    if (!textoGerado) return alert("Gere o relat√≥rio primeiro.");

    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();
    const linhas = textoGerado.split('\n');
    let y = 10;

    doc.setFont("helvetica", "normal");
    doc.setFontSize(12);

    linhas.forEach(linha => {
      if (y > 280) {
        doc.addPage();
        y = 10;
      }
      doc.text(linha, 10, y);
      y += 8;
    });

    doc.save("relatorio-sbar.pdf");
  }
</script>

</body>
</html>
